<div class="downloadBtn">
    <button (click)="downloadPage()" type="button" class="btn btn-primary">Download PDF</button>
</div>



<div class="component-to-download">
    <h3 *ngIf='data?.studentPersonalInfo["Roll No"]'>Result Analysis - Roll No : {{data?.studentPersonalInfo["Roll No"]}}</h3>
    <h3 *ngIf='!data?.studentPersonalInfo["Roll No"]'>Result Analysis - Roll No : 120001</h3>

  <div class="row row-cols-1 row-cols-md-2 g-4 mt-3">
          <div class="col">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title" *ngIf='data?.studentPersonalInfo["Student Name"]'>Student Name : {{data?.studentPersonalInfo["Student Name"] | uppercase}}</h5>
                <h5 class="card-title" *ngIf='!data?.studentPersonalInfo["Student Name"]'>Student Name : {{"Prerna Bhandari" | uppercase}}</h5>
                <div class="card-text">
                      <p *ngIf='data?.studentPersonalInfo["Roll No"]'>
                          Roll No. : {{data?.studentPersonalInfo["Roll No"]}}
                      </p>

                      <p *ngIf='data?.studentPersonalInfo["Fathers Name"]'>
                          Father's Name : {{data?.studentPersonalInfo["Fathers Name"]}}
                      </p>

                      <p *ngIf='data?.studentPersonalInfo["Gender"]'>
                          Gender : {{data?.studentPersonalInfo["Gender"]}}
                      </p>

                      <p *ngIf='data?.studentPersonalInfo["Category"]'>
                          Category : {{data?.studentPersonalInfo["Category"]}}
                      </p>

                </div>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Marks Analysis</h5>
                <div class="card-text">

                  <p *ngIf="data?.resultData['Total Marks']" class="flexx">
                      <span class="left bold">Total Marks</span> <span class="right bold">{{ data?.resultData['Total Marks'] }}</span>
                    </p>
                    <ng-container *ngIf="data?.resultData">
                      <div *ngFor="let key of objectKeys(data?.resultData)">
                        <div *ngIf="key.includes('Subject') && key.includes('Total Marks')" class="flexx">
                          <span class="left">{{ key }}</span> <span class="right">{{ data?.resultData[key] }}</span>
                        </div>
                      </div>
                    </ng-container>

              </div>
            </div>
          </div>
        </div>
    
          <div class="col">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Percentage Analysis (Overall) </h5>
                <p class="card-text">The following graph displays the analysis of percentage scores, including your score, highest score, lowest score, and average score.</p>
                  <div id="percentageChart"></div>
              </div>
            </div>
          </div>

          <div class="col">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Percentage / Rank Analysis (For All Subjects)</h5>
                <p class="card-text">
                  The folllwing data displays the Subject-wise analysis including the rank and percentage scored by the student.
                </p>
                <div class="mt-3">
                  <span class="bold">Percentage</span>
                  <ng-container *ngIf="data?.resultData">
                    <div *ngFor="let key of objectKeys(data?.resultData)">
                      <div *ngIf="key.includes('Subject') && key.includes('Percentage')" class="flexx">
                        <span class="left">{{ key }}</span> <span class="right">{{ data?.resultData[key] }} % </span>
                      </div>
                    </div>
                  </ng-container>
                </div>
              

                <div class="mt-3">
                  <span class="bold">Rank</span>
                  <ng-container *ngIf="data?.resultData">
                    <div *ngFor="let key of objectKeys(data?.resultData)">
                      <div *ngIf="key.includes('Subject') && key.includes('Rank')" class="flexx">
                        <span class="left">{{ key }}</span> <span class="right">{{ data?.resultData[key] }}</span>
                      </div>
                    </div>
                  </ng-container>
                </div>


              </div>
            </div>
          </div>
  </div>


  <div class="rightAlign mt-4 mb-2">
    <h3 class="mt-4">Subject-Wise Analysis</h3>
  </div>

  <div class="row row-cols-1 row-cols-md-3 g-4 mt-3">
    <div class="col">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Subject-wise Question Distribution</h5>
          <div class="card-text">
            <div id="totalQsdonutChart"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Your Performance Distribution</h5>
          <div class="card-text">
            <div id="rightCountDonutChart"></div>           
        </div>
      </div>
    </div>
  </div>

    <div class="col">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Peer Performance Distribution</h5>
          <div id="peerAvgDonutChart"></div>
        </div>
      </div>
    </div>
  </div>
  


  <div *ngIf="data?.resultData" class="row row-cols-1 row-cols-md-1 g-4 mt-3">
    <ng-container *ngFor="let subject of getSubjects(data?.resultData)">
      <div class="col">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title mb-3">{{ subject }} Subject Analysis : </h5>

            <div class="flexx mb-4 px-4">

              <div class="card-content-one">
                <div class="flexx">
                  <span class="left">Total Questions</span>
                  <span class="right bold">{{ data?.resultData['Subject ' + subject + ' Total Questions'] }}</span>
                </div>
                <div class="flexx">
                  <span class="left">Your Total Marks</span>
                  <span class="right bold">{{ data?.resultData['Subject ' + subject + ' Total Marks'] }}</span>
                </div>
                <div class="flexx">
                  <span class="left">Correct</span>
                  <span class="right bold">{{ data?.resultData['Subject ' + subject + ' Right'] }}</span>
                </div>
                <div class="flexx">
                  <span class="left">Incorrect</span>
                  <span class="right bold">{{ data?.resultData['Subject ' + subject + ' Wrong'] }}</span>
                </div>
                <div class="flexx">
                  <span class="left">Unanswered</span>
                  <span class="right bold">{{ data?.resultData['Subject ' + subject + ' Blank'] }}</span>
                </div>
                <div class="flexx">
                  <span class="left">Percentage</span>
                  <span class="right bold">{{ data?.resultData['Subject ' + subject + ' Percentage'] }} % </span>
                </div>
                <div class="flexx">
                  <span class="left">Rank</span>
                  <span class="right bold">{{ data?.resultData['Subject ' + subject + ' Rank'] }}</span>
                </div>
              </div>
  
              <div class="card-content-two">
                <span class="bold">Marks Analysis</span>
                <div #subBarchartContainer></div>
              </div>

              </div>

              <div class="flexx px-4">
                
              <div class="card-content-three">
                <span class="bold">Your Performance Analysis</span>
                <div #chartContainer></div>
              </div>
              
              <div class="card-content-four">
                <span class="bold">Peer Performance Analysis</span>
                <div #peerChartContainer></div>
              </div>
              
              
              
            </div>

            

          </div>
        </div>
      </div>
    </ng-container>
  </div>
  

  <h3 class="mt-4 mb-2">Question Analysis</h3>
  <div class="question-container">
        <div *ngFor="let questionNumber of getQuestionNumbers(); let i = index" 
         [ngClass]="questionLogic[i]" class="question-box">
      {{ questionNumber }}
    </div>
  </div>
  
  

  

</div>








